    - name: Build APK with AAPT2
      run: |
        cd app
        
        echo "üîß –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º —Ä–µ—Å—É—Ä—Å—ã..."
        # –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –¥–ª—è —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
        mkdir -p compiled
        
        # –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º XML —Ä–µ—Å—É—Ä—Å—ã
        for xml_file in src/main/res/layout/*.xml; do
          if [ -f "$xml_file" ]; then
            echo "–ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º: $xml_file"
            $ANDROID_HOME/build-tools/34.0.0/aapt2 compile -o compiled "$xml_file"
          fi
        done
        
        echo "üîß –õ–∏–Ω–∫—É–µ–º —Ä–µ—Å—É—Ä—Å—ã..."
        # –°–æ–∑–¥–∞–µ–º R.java
        $ANDROID_HOME/build-tools/34.0.0/aapt2 link -o resources.apk \
          -I $ANDROID_HOME/platforms/android-34/android.jar \
          --manifest src/main/AndroidManifest.xml \
          --java src/main/java \
          compiled/*.flat
        
        echo "üîß –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º Java –∫–æ–¥..."
        mkdir -p obj
        javac -d obj \
          -cp "src/main/java:$ANDROID_HOME/platforms/android-34/android.jar" \
          -sourcepath src/main/java \
          src/main/java/com/example/internetprovider/*.java
        
        echo "üîß –°–æ–∑–¥–∞–µ–º DEX..."
        $ANDROID_HOME/build-tools/34.0.0/d8 \
          --lib $ANDROID_HOME/platforms/android-34/android.jar \
          --output . \
          obj/com/example/internetprovider/*.class
        
        echo "üîß –°–æ–∑–¥–∞–µ–º APK..."
        # –ö–æ–ø–∏—Ä—É–µ–º AndroidManifest.xml –≤ –∫–æ—Ä–µ–Ω—å –¥–ª—è aapt2
        cp src/main/AndroidManifest.xml ./
        
        $ANDROID_HOME/build-tools/34.0.0/aapt2 link -o app-debug.apk \
          -I $ANDROID_HOME/platforms/android-34/android.jar \
          --manifest AndroidManifest.xml \
          compiled/*.flat
        
        echo "üîß –î–æ–±–∞–≤–ª—è–µ–º DEX –≤ APK..."
        zip -uj app-debug.apk classes.dex
        
        echo "‚úÖ APK —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω!"
